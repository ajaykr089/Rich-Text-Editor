<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Light Code Editor Demo</title>
  <link rel="stylesheet" href="dist/light-code-editor.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .demo-header {
      background: #2d3748;
      color: white;
      padding: 30px;
      text-align: center;
    }

    .demo-header h1 {
      margin: 0 0 10px 0;
      font-size: 2.5rem;
      font-weight: 700;
    }

    .demo-header p {
      margin: 0;
      opacity: 0.9;
      font-size: 1.1rem;
    }

    .demo-content {
      padding: 30px;
    }

    .editor-section {
      margin-bottom: 40px;
    }

    .editor-section h2 {
      color: #2d3748;
      margin-bottom: 20px;
      font-size: 1.5rem;
      font-weight: 600;
    }

    .editor-container {
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      overflow: auto;
      height: 400px;
      background: #f8fafc;
    }

    /* Ensure the editor element fills the container and is itself scrollable */
    #editor {
      height: 100%;
      width: 100%;
      box-sizing: border-box;
      overflow: auto;
    }

    .controls {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      align-items: center;
    }

    .control-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .control-group label {
      font-weight: 500;
      color: #4a5568;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
    }

    .btn-primary {
      background: #667eea;
      color: white;
    }

    .btn-primary:hover {
      background: #5a67d8;
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: #e2e8f0;
      color: #4a5568;
    }

    .btn-secondary:hover {
      background: #cbd5e0;
    }

    .btn-success {
      background: #48bb78;
      color: white;
    }

    .btn-success:hover {
      background: #38a169;
    }

    select, input[type="text"] {
      padding: 8px 12px;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      font-size: 14px;
      background: white;
    }

    select:focus, input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .feature-card {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .feature-card h3 {
      color: #2d3748;
      margin: 0 0 10px 0;
      font-size: 1.2rem;
    }

    .feature-card p {
      color: #718096;
      margin: 0;
      font-size: 0.9rem;
    }

    .status {
      display: inline-block;
      padding: 4px 8px;
      background: #48bb78;
      color: white;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
      margin-left: 10px;
    }

    .code-snippet {
      background: #2d3748;
      color: #e2e8f0;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 14px;
      margin: 20px 0;
      overflow-x: auto;
    }

    .stats {
      display: flex;
      justify-content: space-around;
      background: #f8fafc;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: #667eea;
      display: block;
    }

    .stat-label {
      color: #718096;
      font-size: 0.9rem;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <header class="demo-header">
      <h1>üöÄ Light Code Editor</h1>
      <p>Lightweight, extensible code editor library for the modern web</p>
    </header>

    <div class="demo-content">
      <!-- Stats -->
      <div class="stats">
        <div class="stat">
          <span class="stat-value">~38KB</span>
          <span class="stat-label">Bundle Size</span>
        </div>
        <div class="stat">
          <span class="stat-value">0</span>
          <span class="stat-label">Dependencies</span>
        </div>
        <div class="stat">
          <span class="stat-value">8</span>
          <span class="stat-label">Extensions</span>
        </div>
        <div class="stat">
          <span class="stat-value">100%</span>
          <span class="stat-label">TypeScript</span>
        </div>
      </div>

      <!-- Main Editor Demo -->
      <div class="editor-section">
        <h2>Interactive Demo <span class="status">LIVE</span></h2>

        <div class="controls">
          <div class="control-group">
            <label>Theme:</label>
            <select id="theme-select">
              <option value="dark">Dark</option>
              <option value="light">Light</option>
            </select>
          </div>

          <div class="control-group">
            <label>Extensions:</label>
            <button class="btn btn-secondary" id="toggle-line-numbers">Line Numbers ‚úì</button>
            <button class="btn btn-secondary" id="toggle-syntax">Syntax ‚úì</button>
            <button class="btn btn-secondary" id="toggle-search">Search ‚úì</button>
            <button class="btn btn-secondary" id="toggle-brackets">Brackets ‚úì</button>
            <button class="btn btn-secondary" id="toggle-folding">Folding ‚úì</button>
          </div>

          <div class="control-group">
            <label>Content:</label>
            <select id="content-select">
              <option value="html">Full HTML</option>
              <option value="minimal">Minimal</option>
              <option value="complex">Complex Layout</option>
              <option value="broken">Broken HTML</option>
            </select>
          </div>

          <button class="btn btn-primary" id="fullscreen-btn">Fullscreen</button>
        </div>

        <div class="editor-container">
          <div id="editor"></div>
        </div>
      </div>

      <!-- Features Grid -->
      <div class="features-grid">
        <div class="feature-card">
          <h3>üé® Syntax Highlighting</h3>
          <p>VS Code-style HTML syntax highlighting with customizable themes</p>
        </div>
        <div class="feature-card">
          <h3>üîç Search & Replace</h3>
          <p>Powerful find and replace functionality across the entire document</p>
        </div>
        <div class="feature-card">
          <h3>üìè Code Folding</h3>
          <p>Collapse and expand code sections for better navigation</p>
        </div>
        <div class="feature-card">
          <h3>üîó Bracket Matching</h3>
          <p>Automatic highlighting of matching bracket pairs</p>
        </div>
        <div class="feature-card">
          <h3>üåô Themes</h3>
          <p>Built-in light and dark themes with easy switching</p>
        </div>
        <div class="feature-card">
          <h3>üìñ Read-Only Mode</h3>
          <p>Display code in read-only mode for documentation</p>
        </div>
        <div class="feature-card">
          <h3>üîß Extensible</h3>
          <p>Plugin architecture for adding custom functionality</p>
        </div>
        <div class="feature-card">
          <h3>‚ö° Zero Dependencies</h3>
          <p>Pure JavaScript implementation, no external libraries</p>
        </div>
      </div>

      <!-- Usage Example -->
      <div class="editor-section">
        <h2>Usage Example</h2>
        <pre class="code-snippet"><code>
  import { createEditor, LineNumbersExtension, SyntaxHighlightingExtension } from '@editora/light-code-editor';

  const editor = createEditor(document.getElementById('editor'), {
    value: '&lt;div class="hello"&gt;Hello World&lt;/div&gt;',
    theme: 'dark',
    extensions: [
      new LineNumbersExtension(),
      new SyntaxHighlightingExtension()
    ]
  });

  // Get current content
  console.log(editor.getValue());

  // Listen for changes
  editor.on('change', (changes) => {
    console.log('Content changed:', changes);
  });
          </code></pre>
      </div>
    </div>
  </div>

  <script type="module">
    import { createEditor, LineNumbersExtension, SyntaxHighlightingExtension, ThemeExtension, ReadOnlyExtension, SearchExtension, BracketMatchingExtension, CodeFoldingExtension } from './dist/index.es.js';

    // Sample content
    const sampleContent = {
      html: `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sample Document</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    h1 {
      color: #333;
      text-align: center;
    }

    .highlight {
      background-color: #fff3cd;
      padding: 10px;
      border-left: 4px solid #ffc107;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Welcome to Our Website</h1>

    <p>This is a sample HTML document demonstrating various elements and styling.</p>

    <div class="highlight">
      <strong>Note:</strong> This content is highlighted for emphasis.
    </div>

    <ul>
      <li>First item</li>
      <li>Second item with <a href="#">a link</a></li>
      <li>Third item</li>
    </ul>

    <button>Click me</button>

    <!-- This is a comment -->
    <p>End of document.</p>
  </div>

  <script>
    /* Page script removed demo console.log */
  <\/script>
</body>
</html>`,
      minimal: `<!DOCTYPE html>
<html>
<head><title>Minimal</title></head>
<body>
  <h1>Hello World</h1>
  <p>This is a minimal HTML document.</p>
</body>
</html>`,
      complex: `<div class="wrapper">
  <header>
    <nav>
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section id="home">
      <h1>Welcome</h1>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
      <button class="btn-primary">Get Started</button>
    </section>

    <section id="about">
      <h2>About Us</h2>
      <div class="grid">
        <div class="card">
          <h3>Feature 1</h3>
          <p>Description of feature 1.</p>
        </div>
        <div class="card">
          <h3>Feature 2</h3>
          <p>Description of feature 2.</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2024 Company Name. All rights reserved.</p>
  </footer>
</div>`,
      broken: `<html>
<head>
  <title>Broken HTML</title>
<body>
  <h1>Unclosed heading
  <p>Missing closing tags
  <div class="broken">
    <span>Nested content
    <img src="image.jpg" alt="Missing quote>
  </div>
  <p>More content
</body>
</html>`
    };

    let editor;
    let currentExtensions = {
      lineNumbers: true,
      syntax: true,
      search: true,
      brackets: true,
      folding: true,
      readonly: false
    };

    function createEditorInstance() {
      if (editor) {
        editor.destroy();
      }

      const extensions = [];

      if (currentExtensions.lineNumbers) extensions.push(new LineNumbersExtension());
      if (currentExtensions.syntax) extensions.push(new SyntaxHighlightingExtension());
      extensions.push(new ThemeExtension());
      if (currentExtensions.readonly) extensions.push(new ReadOnlyExtension());
      if (currentExtensions.search) extensions.push(new SearchExtension());
      if (currentExtensions.brackets) extensions.push(new BracketMatchingExtension());
      if (currentExtensions.folding) extensions.push(new CodeFoldingExtension());

      editor = createEditor(document.getElementById('editor'), {
        value: sampleContent.html,
        theme: document.getElementById('theme-select').value,
        readOnly: currentExtensions.readonly,
        extensions
      });

      // Editor initialized (extensions available in `extensions`)
    }

    // Initialize
    createEditorInstance();

    // Event listeners
    document.getElementById('theme-select').addEventListener('change', (e) => {
      if (editor) {
        editor.setTheme(e.target.value);
      }
    });

    document.getElementById('content-select').addEventListener('change', (e) => {
      if (editor) {
        editor.setValue(sampleContent[e.target.value]);
      }
    });

    document.getElementById('toggle-line-numbers').addEventListener('click', () => {
      currentExtensions.lineNumbers = !currentExtensions.lineNumbers;
      document.getElementById('toggle-line-numbers').textContent = `Line Numbers ${currentExtensions.lineNumbers ? '‚úì' : '‚úó'}`;
      createEditorInstance();
    });

    document.getElementById('toggle-syntax').addEventListener('click', () => {
      currentExtensions.syntax = !currentExtensions.syntax;
      document.getElementById('toggle-syntax').textContent = `Syntax ${currentExtensions.syntax ? '‚úì' : '‚úó'}`;
      createEditorInstance();
    });

    document.getElementById('toggle-search').addEventListener('click', () => {
      currentExtensions.search = !currentExtensions.search;
      document.getElementById('toggle-search').textContent = `Search ${currentExtensions.search ? '‚úì' : '‚úó'}`;
      createEditorInstance();
    });

    document.getElementById('toggle-brackets').addEventListener('click', () => {
      currentExtensions.brackets = !currentExtensions.brackets;
      document.getElementById('toggle-brackets').textContent = `Brackets ${currentExtensions.brackets ? '‚úì' : '‚úó'}`;
      createEditorInstance();
    });

    document.getElementById('toggle-folding').addEventListener('click', () => {
      currentExtensions.folding = !currentExtensions.folding;
      document.getElementById('toggle-folding').textContent = `Folding ${currentExtensions.folding ? '‚úì' : '‚úó'}`;
      createEditorInstance();
    });

    document.getElementById('fullscreen-btn').addEventListener('click', () => {
      const container = document.querySelector('.editor-container');
      if (container.requestFullscreen) {
        container.requestFullscreen();
      }
    });

    // Listen for editor changes
    setTimeout(() => {
      if (editor) {
        editor.on('change', (changes) => {
          // Editor content changed - handled by consumers
        });
      }
    }, 100);
  </script>
</body>
</html>
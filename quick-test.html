<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quick Test - Editora Web Component</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
    }
    h1 { color: #4CAF50; }
    .status { 
      padding: 15px;
      background: #f0f0f0;
      border-radius: 4px;
      margin: 20px 0;
      font-family: monospace;
    }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>
  <h1>üß™ Editora Web Component Test</h1>
  
  <div id="status" class="status">Loading...</div>
  
  <h2>Editor Instance:</h2>
  <rich-text-editor id="test-editor" height="300">
    <h2>Test Editor</h2>
    <p>If you can see this and the toolbar above, <strong>everything works!</strong></p>
    <p>Try editing this text.</p>
  </rich-text-editor>
  
  <h2>API Test:</h2>
  <div id="api-result" class="status">Click button to test API...</div>
  <button onclick="testAPI()" style="padding: 10px 20px; margin: 10px 0;">Test API</button>
  
  <script src="packages/core/dist/webcomponent.min.js"></script>
  <script>
    window.addEventListener('load', () => {
      const status = document.getElementById('status');
      let results = [];
      
      // Test 1: Check if Editora global exists
      if (typeof window.Editora !== 'undefined') {
        results.push('‚úÖ Global Editora object exists');
      } else {
        results.push('‚ùå Global Editora object missing');
      }
      
      // Test 2: Check version
      if (window.Editora && window.Editora.version) {
        results.push(`‚úÖ Version: ${window.Editora.version}`);
      } else {
        results.push('‚ùå Version missing');
      }
      
      // Test 3: Check plugins
      if (window.Editora && window.Editora.plugins) {
        results.push(`‚úÖ Plugins loaded: ${window.Editora.plugins.length}`);
      } else {
        results.push('‚ùå Plugins missing');
      }
      
      // Test 4: Check custom element
      if (customElements.get('rich-text-editor')) {
        results.push('‚úÖ Custom element registered');
      } else {
        results.push('‚ùå Custom element not registered');
      }
      
      // Test 5: Check editor instance
      const editor = document.getElementById('test-editor');
      if (editor && typeof editor.getContent === 'function') {
        results.push('‚úÖ Editor instance functional');
      } else {
        results.push('‚ùå Editor instance broken');
      }
      
      // Display results
      const allPassed = results.every(r => r.startsWith('‚úÖ'));
      status.innerHTML = results.join('<br>');
      status.className = allPassed ? 'status success' : 'status error';
      
      // Wait for editor to be ready
      editor.addEventListener('editor-ready', () => {
        console.log('‚úÖ Editor ready event fired');
      });
    });
    
    function testAPI() {
      const editor = document.getElementById('test-editor');
      const result = document.getElementById('api-result');
      const api = editor.getAPI();
      
      let tests = [];
      
      // Test getContent
      try {
        const content = api.getContent();
        tests.push(`‚úÖ getContent(): ${content.length} chars`);
      } catch (e) {
        tests.push(`‚ùå getContent() failed: ${e.message}`);
      }
      
      // Test setContent
      try {
        const timestamp = new Date().toLocaleTimeString();
        api.setContent(`<p>API test at ${timestamp}</p>`);
        tests.push(`‚úÖ setContent(): Success`);
      } catch (e) {
        tests.push(`‚ùå setContent() failed: ${e.message}`);
      }
      
      // Test execCommand
      try {
        api.execCommand('toggleBold');
        tests.push(`‚úÖ execCommand(): Success`);
      } catch (e) {
        tests.push(`‚ùå execCommand() failed: ${e.message}`);
      }
      
      // Test focus
      try {
        api.focus();
        tests.push(`‚úÖ focus(): Success`);
      } catch (e) {
        tests.push(`‚ùå focus() failed: ${e.message}`);
      }
      
      // Test getConfig
      try {
        const config = api.getConfig();
        tests.push(`‚úÖ getConfig(): ${Object.keys(config).length} keys`);
      } catch (e) {
        tests.push(`‚ùå getConfig() failed: ${e.message}`);
      }
      
      // Display results
      const allPassed = tests.every(t => t.startsWith('‚úÖ'));
      result.innerHTML = tests.join('<br>');
      result.className = allPassed ? 'status success' : 'status error';
    }
  </script>
</body>
</html>
